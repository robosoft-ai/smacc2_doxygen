\doxysubsection*{State Machine Diagram}

! New Image required

\doxysubsection*{Description}

A full-\/featured state machine example, that highlights the capabilities of SMACC2, ROS2 \& Nav2 via the Nav2z Client. In the original \mbox{\hyperlink{namespacesm__dance__bot__strikes__back}{sm\+\_\+dance\+\_\+bot\+\_\+strikes\+\_\+back}} state machine, the variables that controlled the movements of the robot were entirely static, but in this example we made them dynamic, in that the robot uses a lidar sensor to find the range of the wall in front of it, then moves forward that value minus some margin. This also shows the \char`\"{}\+Orthogonal Read-\/\+Write Cycle\char`\"{} where we are reading data from one orthogonal (in this case the lidar client, \char`\"{}cl\+\_\+lidar\char`\"{} is inside the obstacle perception orthogonal \char`\"{}or\+\_\+obstacle\+\_\+perception\char`\"{} and writes via the client \char`\"{}cl\+\_\+nav2z\char`\"{} in the navigation orthogonal \char`\"{}or\+\_\+navigation\char`\"{}.~\newline
 \href{https://robosoft-ai.github.io/SMACC2_Documentation/master/html/namespacesm__dance__bot__strikes__back.html}{\texttt{ Doxygen Namespace \& Class Reference}}

! Updated video url required To see a video of this state machine in action click \href{https://www.youtube.com/watch?v=ucMr5Dg6UpU}{\texttt{ here}}. ~\newline


\doxysubsection*{Build Instructions}

First, source your chosen ros2 distro. 
\begin{DoxyCode}{0}
\DoxyCodeLine{source /opt/ros/rolling/setup.bash}

\end{DoxyCode}
 
\begin{DoxyCode}{0}
\DoxyCodeLine{source /opt/ros/galactic/setup.bash}

\end{DoxyCode}


Before you build, make sure you\textquotesingle{}ve installed all the dependencies...


\begin{DoxyCode}{0}
\DoxyCodeLine{rosdep install -\/-\/ignore-\/src -\/-\/from-\/paths src -\/y -\/r}

\end{DoxyCode}


Then build with colcon build...


\begin{DoxyCode}{0}
\DoxyCodeLine{colcon build}

\end{DoxyCode}
 \doxysubsection*{Operating Instructions}

After you build, remember to source the proper install folder...


\begin{DoxyCode}{0}
\DoxyCodeLine{source \string~/colcon\_ws/install/setup.bash}

\end{DoxyCode}


And then run the launch file...


\begin{DoxyCode}{0}
\DoxyCodeLine{ros2 launch sm\_dance\_bot\_strikes\_back sm\_dance\_bot\_strikes\_back\_launch.py}

\end{DoxyCode}


\doxysubsection*{Viewer Instructions}

If you have the SMACC2 Runtime Analyzer installed then type...


\begin{DoxyCode}{0}
\DoxyCodeLine{ros2 run smacc2\_rta smacc2\_rta}

\end{DoxyCode}


If you don\textquotesingle{}t have the SMACC2 Runtime Analyzer click \href{https://robosoft.ai/product-category/smacc2-runtime-analyzer/}{\texttt{ here}}. 